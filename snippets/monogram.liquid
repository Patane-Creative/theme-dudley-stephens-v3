{% assign monogram_product = all_products.monogram %}
{% assign current_variant = monogram_product.selected_or_first_available_variant %}

<script src="{{ 'monogram.js' | asset_url }}" defer></script>

<monogram-toggle>
  <input id="add-monogram" type="checkbox">
  <label for="add-monogram">Add a custom embroidery +$15</label>

  <div class="monogram-button-wrapper hide">
    <button
      class="js-modal-open-monogram-modal btn btn--secondary btn--full"
    >
      Personalize it
    </button>
    <small class="text-center"> â“˜ You must personalize it before adding to the cart. </small>
  </div>
</monogram-toggle>

<div
  id="MonogramModal"
  class="modal modal--square"
>
  <div class="modal__inner">
    <div class="modal__centered">
      <div class="modal__centered-content">
        <monogram-customizer class="grid">
          <div class="grid__item one-half">images</div>
          <div class="grid__item one-half">
            <h2>Personalize it</h2>

            <form action="/cart/add" method="POST">
              {%- unless monogram_product.has_only_default_variant -%}
                {%- for variant in monogram_product.variants -%}
                  <label for="{{ variant.id }}">{{ variant.title }}</label>
                  <input
                    type="radio"
                    name="items[0][id]"
                    id="{{ variant.id }}"
                    value="{{ variant.id }}"
                    {% if forloop.first %}checked{% endif %}
                  >
                {%- endfor -%}
              {%- endunless -%}

              <input type="hidden" name="items[0][quantity]" value="1">
              {% comment %} TODO: make this variant ID dynamic {% endcomment %}
              <input type="hidden" name="items[1][id]" value="39727329542186">
              <input type="hidden" name="items[1][quantity]" value="1">
 
              <button class="btn monogram__add-to-cart">Submit</button>
            </form>
          </div>
        </div>
      </monogram-customizer>

      <button type="button" class="modal__close js-modal-close text-link">
        <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-close" viewBox="0 0 64 64">
          <path d="M19 17.61l27.12 27.13m0-27.12L19 44.74"/>
        </svg>
        <span class="icon__fallback-text">{{ 'general.accessibility.close_modal' | t | json }}</span>
      </button>
    </div>
  </div>
</div>
